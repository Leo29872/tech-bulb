{"componentChunkName":"component---src-templates-blog-post-js","path":"/how-web-browser-executes-javascript","result":{"data":{"markdownRemark":{"html":"<div class=\"blog-post__container\">\n<p>Most of us, developers worked with Javascript experienced situation when you struggle with your code and you don’t have any idea why it doesn’t work. You made a few changes and it still doesn’t work. After that you made more and more changes and none of the solutions was valid. You start to question your career, your life and you realize that the computer is stupid(computer don’t think, it only executes your commands and gives you results). So, you realized the computer doesn’t take responsibility of your stupidity. You realized that the only problem is in you, in your knowledge. You realized that you don’t know the subject well.</p>\n<h3>How browser runs Javascript?</h3>\n<p>If we take Google Chrome as a browser you need to know it has it’s own engine which is single-threaded- it executes it only run one operation at the time. The engine consists two main parts:\n1. Call stack – stores information about actions which are currently running in the program, which method are executed etc.\n2. Memory heap – It’s the place apart from the program code and the call stack and it’s reserved for memory allocation which you program needs. Your browser needs some portion of memory to execute code in it.</p>\n<p>So the engine is mostly that 2 concepts: call stack and memory heap, but we have also additional Web API’s, event loop and callback queue in our browser.</p>\n<p>Let’s understand how call stack works.</p>\n<h3>What is the call stack?</h3>\n<p>It shows where in the program we are. It’s similar to Hanoi tower. When we call the function it goes at the top of the call stack. When inside that function we call another function, now the second function is on top. If that second function returns a value it gives that value to first function and goes away from the call stack. After that first function is on top, when it returns a value, the call stack is empty. I think the best solution to understand that is to show an example.</p>\n<pre>\nfunction add(x,y){\n  return x + y;\n}\n\nfunction myCustomFuction(a, b){\nconsole.log(\"first\");\nlet result = add(a,b);\nconsole.log(result);\n}\nmyCustomFuction(2,3);</pre>\n<p>result in console will be: ‘first’, 5</p>\n<p>First, we want to call myCustomFuction(2,3). It goes to the call stack. When we execute that function, we print ‘first’ and after that add(a,b) goes to the call stack above myCustomFuction(2,3). Then add(a,b) return value and it it stored in let result. add(a,b) goes away from the call stack. After that in myCustomFunction we display result variable value and call stack is now empty.</p>\n<h3>What are Browser Web API’s?</h3>\n<p>Web API’s contains Standard JavaScript APIs(DOM), HTML5 and other emerging APIs(localStorage etc.) and more.</p>\n<p>You can check full list: <a href=\"https://developer.chrome.com/apps/api_other\" target=\"_blank\" title=\"additional API's\">here</a></p>\n<h3>What are callback queue and event loop?</h3>\n<p>Javascript run-time own a queue which contains a list of operations to perform from Web API’s. The first operation which land on the queue is the first operation execute. When call stack is empty then event loop execute operations in the callback queue.</p>\n<p>I created 3 call stack behavior examples, if you want, you can solve how results list will be look like. I added answers after Example 3 code.</p>\n<p>Example 1:</p>\n<pre>\nfunction function1(){\nfunction5();\nconsole.log(\"first\");\n}\n\nfunction function2(){\nfunction3();\nconsole.log(\"second\")\nfunction1();\n}\n\nfunction function3(){\nconsole.log(\"third\");\n}\n\nfunction function4(){\nfunction2();\n}\n\nfunction function5(){\nconsole.log(\"fifth\");\n}\n\nfunction4();</pre>\n<p>Example 2:</p>\n<pre>\nfunction function1(){\nconsole.log(\"first\");\n}\n\nfunction function2(){\nconsole.log(\"second\");\n}\n\nfunction function3(){\nfunction1();\nsetTimeout(() => console.log('timeout'), 0);\nfunction2();\n}\n\nfunction3();</pre>\n<p>Example 3:</p>\n<pre>\nfunction crash(){\nconsole.log(\"wait to crash\");\ncrash();\n}\n\ncrash();</pre>\n<p>Example 1 answer:<br />\nresult: third, second, fifth, first</p>\n<p>Example 2 answer:<br />\nresult: first, second, timeout</p>\n<p>The question is why? Why, when we add 0s delay of timeout it display value last? First function3 goes to the call stack. After that function1 goes at the top of the call stack, display value and goes away. Then we execute setTimeout(), but it’s from Web API and it goes to callback queue. After that function3() goes to the call stack, display value and goes away. After that function3() made everything and also goes away from call stack and now when the call stack is empty, event loop start executing functions in callback queue, SetTimeout goes to call stack, display value and call stack is empty.</p>\n<p>Example 3 answer:<br />\nIt adds itself at the top of the call stack all the time and after a moment(in my case browser display that 17229 times) browser return Uncaught RangeError: Maximum call stack size exceeded.</p>\n<h3>Is Javascript hard to understand?</h3>\n<p>For me Javascript is the technology which is really easy to start and really hard to master. When you start learning Javascript everything looks so pretty, you learn loop, statements, you output results in your browser and you think you need few weeks/months and you will be great developer. After a few weeks/month you start a big project and you realized that you make things intuitively(like in tutorials you saw), but real/commercial projects are something more than tutorial of building calculator in hundreds of frameworks. You realized that you have shortages in basic concepts. You can’t predict how your program will be executed. You try one concept if it doesn’t work you try something more and if it’s works you go to the next task, but you don’t know exactly why it works and previous code not. You are like the person in the meme below:</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 150%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUBBAYD/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAZZ5t1FwXBxaZ5yWxYH/xAAbEAADAQEAAwAAAAAAAAAAAAAAAQIDIRESIv/aAAgBAQABBQLCzhwymqzbY0qeFKVw95Mc6vL6Z5m3/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8BIf/EAB0QAQACAgIDAAAAAAAAAAAAAAEAEQIxEJEhMkL/2gAIAQEABj8CL1LmzuIMqecXqD88exMkyohGzTU//8QAHRABAAMAAQUAAAAAAAAAAAAAAQARITFBUXGBof/aAAgBAQABPyEAeuFzFoCGbIAnFo03eRNYzmKnLnKdchpXvFBaASyrP3DoWaeIlCzPs0JcH//aAAwDAQACAAMAAAAQny/O/8QAFhEBAQEAAAAAAAAAAAAAAAAAERAx/9oACAEDAQE/EFi7P//EABgRAAMBAQAAAAAAAAAAAAAAAAABETEh/9oACAECAQE/EGpjODjCH//EABwQAQEAAwADAQAAAAAAAAAAAAERACExQVFhkf/aAAgBAQABPxBFhYXoPQvvLMR6roxsCjuRhQZglSpIOGtoiG1+8wIlUUqezXN4eJAhoXh+4qNNrNGRJNOM4rKhQVejOC6BG+HcHTFU/Adfuf/Z&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"article1\" title=\"article1\" src=\"/static/63f0416a366eb58514fbba1ac8aa9478/e2288/article1.jpg\" srcset=\"/static/63f0416a366eb58514fbba1ac8aa9478/d132a/article1.jpg 243w,\n/static/63f0416a366eb58514fbba1ac8aa9478/ec0b4/article1.jpg 485w,\n/static/63f0416a366eb58514fbba1ac8aa9478/e2288/article1.jpg 640w\" sizes=\"(max-width: 640px) 100vw, 640px\" loading=\"lazy\">\n    </span>\n<p>Someday you decided that there is no shortcuts and you need to understand how Javascript really works entirely. You google that and you visit my personal blog- where I write posts about things which I learned. I am also like the guy in the meme above really often and I think most of developers which I met struggle with that. There is an essence of programming- solving problems. You have to deal with things which not work at the start and all time learn new things.</p>\n</div>","frontmatter":{"path":"/how-web-browser-executes-javascript","title":"How Web browser executes Javascript?","author":"Szymon Radosz","date":"2018-11-12"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}