{"componentChunkName":"component---src-templates-blog-post-js","path":"/build-web-scrapping-app-with-node-js-and-react-js","result":{"data":{"markdownRemark":{"html":"<div class=\"blog-post__container\">\n<p>Today I decided to make a tutorial about web scraping using Node.js and Cheerio.js.</p>\n<p>We’ll scrap some website with flyies offers, save that in MySQL database and then using React we display results which we got from our db.</p>\n<p>Firstly, I show you what the result of that tutorial looks like:</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 970px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/59f71690daeb3ec774406e53af853335/3399b/article1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 72.06446661550268%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACKUlEQVQoz21SzWsTQRTP3X9F9GpPKh7Uk95E0BwUqlTBEvWgPZmToIeuaBJSjSma6iWKVUhRKEUUP8CDkLZpY5svu0k2TfZjdmdnZmd2fOvG2iR9PN4us/z29/Em4vu+lBJm4olyfepqPDEdn0n39J5NeMfCHdPtIQLdtYJpOtQhnvxXkRAshH/80oV9J8fO3x4/fe5wpVFhXJoOqbatzZZZaQVTM7BNGB4FQ12+PxV/mTSQocy+qDXboRw5UrvPIv0jKRdKW2+Xt/PFTuZ7w8AMuUy3adf6L7uLXAszTAeYgwcX4sSzb4dSHw8ml44+WtB022UcMDUNgfKaZtU11Oo58Mc9PYvJTH7iYeZOOpt+mkGWGcqGjxBH0HtZiPh9J/7813ry3ZoyvzpTWAVeYDYcClTQoNYhwQQjHveHZQP4WvbHkXvvJ1KF6I1baru1jRgkXPqth72uGisNHVxYDgszGlhVLJe/mFCu3Dx7JjrW1NTQiwOxIWJhaiDiUv43HX9YNhf8w6elcrWytlmuqVXOPZAHK/W4YJ6gjDMuCOM28Xab7zN7Hrv7ILb4+bWUVEoErBD1SqO30TTLqgENma9v6TABPpI2Z6ncuPL41Nxc9NWbSQfr4f6Ac6dBhR8uYEi2EDz/pZhcLCmFn9OFYtemoBZMQuaYcsIEvLjUgxsSOh9g5pzHsrljz5f3z5oHks26TjFlcKsg3g3VBPG/mibcE8OmCLMd8B+SEvNhx8H7rQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"article1\" title=\"article1\" src=\"/static/59f71690daeb3ec774406e53af853335/9435c/article1.png\" srcset=\"/static/59f71690daeb3ec774406e53af853335/02020/article1.png 243w,\n/static/59f71690daeb3ec774406e53af853335/d40d9/article1.png 485w,\n/static/59f71690daeb3ec774406e53af853335/9435c/article1.png 970w,\n/static/59f71690daeb3ec774406e53af853335/3399b/article1.png 1303w\" sizes=\"(max-width: 970px) 100vw, 970px\" loading=\"lazy\">\n  </a>\n    </span>\n<p>There are current offers with data scraped from website below. This app allows you to display interesting offers from the landing page of the page we’ve scrapped and when you find something interesting deals you can go to the provider page for all details. There’s the form of advertisement for a provider website. We don’t use that data for bad purposes to be clear buddy.</p>\n<p>Provider website: https://www.fly4free.com/flights/flight-deals/usa/</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 970px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/f1ee4b7f92943af696fc93864db914d2/832fe/article2.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.34867002156723%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACXklEQVQoz22SS08TURTH2ftZ3Llz4wdwY9ywMxpXRhdiQtBo0EZDxGjQiC60AlEUMSSGKGABCxEQikzog7b0MZ3O6857pvfO3JnO0wEELfFs/ufe3N/J/5x7uqL9cNruZqkCgxB7kesFvu+bJoYmxhYO2r6gCiPzU+UmzQNFUrQwDA+oroPMgEbP7UvrW2k/iE+h7WCixOdqwq8dhhcRDdjEfJ7gTFFUFB0GQdABI1O99ejMs2R36tvdpYX+SvW7LBuqqmi6BiGUNflHZrnaoKtNUdFacfUO2LbNydmhqdTT958Trz70bmynPC/UWibNyjzLGkjNZZcbzQaQ9BgOgkM46oz4OvbU9mPdK+t7XpxIivTm7VC+nKcFXVSNo8eHtjG+Prp4+RO4+BGefW28XEGSrFG8zgJN0y0TGXOTyWqxLAAdGeZ/4AvDj899zZ2agSdeUH0LHEVx+SrfBBpEDof0FbpMSMyGxGwqXDvwO6eNjNPdJ3sG+p7PTAznNtIC8G0cO6RoSQTcrswlZ6cXi9mMQBMy6x5N+0A8zyOK+c2t1QKxVtrdllQh2m86/vE44QH3IHGjWNixkes77j+298Vy2mNL2VQBELxfhxHdcgtVfqcuZEusKFssU7v55P52jQKiYkB4vGfs4GuDvVeH+u9NjN9JPJxbzdQYpdIQRbVl2X6NJK8MDOTJJtpbOvwX/qOB64EMKHyprI8m+8//XHgHEWI4keVERQKMqo6sF+qiYiFkWtZx2PPDNdJOk9Ey6aRrOqnaUeBD7GgadBBiucb42CDVrFvYNk3zaLd/A1gesV/InqXfAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"article2\" title=\"article2\" src=\"/static/f1ee4b7f92943af696fc93864db914d2/9435c/article2.png\" srcset=\"/static/f1ee4b7f92943af696fc93864db914d2/02020/article2.png 243w,\n/static/f1ee4b7f92943af696fc93864db914d2/d40d9/article2.png 485w,\n/static/f1ee4b7f92943af696fc93864db914d2/9435c/article2.png 970w,\n/static/f1ee4b7f92943af696fc93864db914d2/832fe/article2.png 1391w\" sizes=\"(max-width: 970px) 100vw, 970px\" loading=\"lazy\">\n  </a>\n    </span>\n<h3>Basic setup</h3>\n<p>I decided to use ready boilerplate for our app with Node.js, Express.js and React to speed up our development.</p>\n<p>To start that tutorial you should write the post below:</p>\n<p>https://hackernoon.com/full-stack-web-application-using-react-node-js-express-and-webpack-97dbd5b9d708</p>\n<p>After successfully setting up our boilerplate your project structure should looks like:</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 161px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/7c8d9b6af68bf3e0d5aab8398272ea1a/eb3e8/article3.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 224.22360248447205%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAtCAIAAAAhntw/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAE3ElEQVRIx42W6VoiWQyGuYtuV4TaNzbZxYKSTcAFbATFZtMeYFzm1/yf6+i7nbc40zyjgnY98XjqVKWSfPmSEAiHpUwmG43GHCeSSqXT6QximhaH8XiCNZFI5nJ5XlAU9Y0EUM5mczyLxeKed+K6bqnk8XahcHx0VHDdIptyucLJGmVV1Q4OQqFQmHVvb1/s+aIkybKsCGH/XtNX5lUs823sdLvd6XR6f/9QLJbQWavwSpmXLMvWdcvzqufnF61Wq9ls4upvKfMnSYppqqmUire6bgSDB8SiaTort8hGZVVVg0GlVrN//gTY6Gy2+O5fw8Hgrtu97nSu2BAR0fGtNZYVGRNaPKHjaSJ+mEgkDg+TSCQSJVvJZNIwzLVR+MqyopqaljRV0zAikRi6iEg1+SOLfGIt4D5gYUmJW9rpoXIYi04m0/l88fDwcHs7GI1G3I7HE7JNCn0zv5InJOA4UctydMM2TEfTTNuORCJxy4pEowkecWvbUTZrJZBOFzzvtNVqVyrNXu+uWKxykssVMxk3m/1EfOVqtXV6en552X14mHteLZM5zudLn2r6ynhoGD5JDMNSFF2s4bDChkcfC4DJ8Ng0TRgKHwaDwXA4JM+NRgOKL4HZeAUE6PCJkiSflUq1Wq0hEP5ThgZWO/R5G25CJlb27ym1ltuybTv1+ikVQm5vbm4prNFoDE8+Nu4rA48kqeI9uAUrCQFWfV5V4TD1ZCSTKtzgohPBbQI2Tft36lkdjWLZrHJyUl8sFs/PL7PZ/Onpqdfri2L8IHLc9jkrLVMSCkmgtb9/sLu7JzpRMBgS4G3sJNPW3+fuABaTp06nc3Z21m53XP8qViqVRqO5sSQ5vKktqtl2vpC/vr6+uvrWRrVzdXZ2DuxskU2w+8oHoQNJlii6nZ1dGujW1vaXL1u7u/vs9/eDnH/k9uFR0Yr5HYPqJcPY7/f7uHB39x3wCX4TZgF6kGE5kqLSMfv9G5ouOBN8uVxmBkCbD3jiF4Zjxkzd8dmo6SBMhrAG7OBEZX2kTHaK6ZqtR4ul0nA4Go/HFBaYTyaT+/t7z/OIeaPbfFhXIrKkGYYBK+EmrtI6iRaQUcMLkfM1ypqmVipmoeDrMuxQy+Vyy6HpiL5JA2Xlu+/9DxiG2u9HazWjXPbpCdrz+ZyJJVrCjx9/iBUIMf7Gf5/biKIwK8NiSrIisBKhGYnyFhC+yTmWtXbbwfNUKgcxa7X6t29d7LDJ5wvN5bVkK1StQlUqf6Uf0HW1Xrfzea1eb9IJGJQMWjoBoxZyX1xcgjxDq9frQVgERFfg+W6jr+u+21+/bglKUlXI3p6/2d7e4QRr690ejmKtluW65el0cn3dAzPoyXDE2uVlG5Ku0HoLGMWezWixmOy6Hu2W2E5OymLKEzYM5ZbetHFKavGcYsV1XNf+E3giGCI6yeYRq2qZq7GZK+Hh89PzbDbDTzrRy8sLhcWsJMn8Ptow3GVF001VN1RFhVIYYTJiHMvc4gLwCrQI+w1JUZbTV+NoqeFYFowmZhgKH8WvOZTF77PjY9e27WQy9VpZkktP/8TPbpu16uLPR0b5y8tfj49PNAaIiecMevYEQuaJCKdeT4xQSF7WDb4homPBx9UvONJLOHhE2K/y7P/7hYTI5OrxaiMOxef+7/a/lcQHLxjO8qwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"article3\" title=\"article3\" src=\"/static/7c8d9b6af68bf3e0d5aab8398272ea1a/eb3e8/article3.png\" srcset=\"/static/7c8d9b6af68bf3e0d5aab8398272ea1a/eb3e8/article3.png 161w\" sizes=\"(max-width: 161px) 100vw, 161px\" loading=\"lazy\">\n  </a>\n    </span>\n<p>src/client is where our frontend part(React) is located and src/server is where our backend(Node.js, Express.js. Cheerio.js) is landed.</p>\n<h3>Our Backend functionality</h3>\n<p>In src/server we need structure like that:</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 199px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/45a897a8a75a12ebf7c10e77581db9bb/f6261/article4.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 78.89447236180905%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABoElEQVQoz41Ti1KCQBTlT8oX4AKuLigsDGaGRjn4IC2x8VEN//8Lnek2m41OyRwuDHsP5+69Z7V6vcGYJYTLebvTEY2Gfjm0Wq3uOK1ezx+P7x8fJ5VKtVqt4eNFZNxIVdkQt23HsmxUdBEZea0WDwIZx/3D4W273Y1GY+jruvE/mfgQpwig+IvK/iI0DMPs92/iOH56Wi6Xq8Uipz/+Dc2yHAUhvCAIfV+6bk/XTcbs49VTaFLeEHw/TtNpkjzM58vVarPbvQ+HKT6qhFNo3W5I8Dw5GIykvJtMFlk2n07zKBpw3hXC73R6iCpTQUNLCbiur+u3t6zd1lF2kiTofxiGAR4yhItUpoJ23L2rKz3LmJRWmk7W62I2g/4Mznl+fkEk8xzP/xdZCIMxh3P4xCafmGYTCogm2scsAHNRfDVnnTFjv3fi2P/4KLdfV1FsgCyblmW53x/yPMcUoyiCC8g/P8rgAygMC4jkMGhCCmcGFsQ7xTPKzea3clG8QhY62DMVSaBTcGbPIJumwTn2zDwPg3FxzsIwovKot/Ry3KNPWsuxOnEwpasAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"article4\" title=\"article4\" src=\"/static/45a897a8a75a12ebf7c10e77581db9bb/f6261/article4.png\" srcset=\"/static/45a897a8a75a12ebf7c10e77581db9bb/f6261/article4.png 199w\" sizes=\"(max-width: 199px) 100vw, 199px\" loading=\"lazy\">\n  </a>\n    </span>\n<p>index.js – main Node.js file</p>\n<p>index.js – main Node.js file</p>\n<p>index.js – main Node.js file</p>\n<h3>DB setup</h3>\n<p>You have to create a database called flyscrapper in your phpmyadmin. If you use Windows oparating system, please install XAMPP, run Apache and MySQL and visit localhost/phpmyadmin.</p>\n<h3>Scrapper functionality</h3>\n<p><span class=\"blog-post__file--name\"><i>server/fly4freeScapper.js</i></span></p>\n<pre>\nconst requestPromise = require('request-promise');\n\nconst cheerio = require('cheerio');\n\nconst url = 'https://www.fly4free.com/flights/flight-deals/usa/';\n\nconst mysql = require('mysql');\n\nconst con = mysql.createConnection({\n  host: \"localhost\",\n  user: \"root\",\n  password: \"\",\n  database: \"flyscrapper\"\n});\n\nvar checkIfTableExists = \"SHOW TABLES LIKE 'fly4free'\";\n\nconsole.log(checkIfTableExists);\n\ncon.query(checkIfTableExists, function (err, result) {\n\n  if (err) throw err;\n\n  console.log(result.length);\n\n  if(result.length == 0){\n    con.query(\"CREATE TABLE fly4free (id int NOT NULL AUTO_INCREMENT, title VARCHAR(255), description VARCHAR(255), page_url VARCHAR(255), img_url VARCHAR(255), PRIMARY KEY (id))\", function (err, result) {\n\n      if (err) throw err;\n\n      console.log(\"Table created\");\n    });\n  }else{\n    console.log('table exists');\n  }\n});\n\nrequestPromise(url).then(function(entireWebsiteHtml){\n  const result = cheerio('.entries-sub > .entry', entireWebsiteHtml);\n\n  const flyResults = [];\n\n  result.map(i => {\n\n      let title = cheerio('.entries > .entry > .entry__title', entireWebsiteHtml).eq(i).text();\n\n      let description = cheerio('.entries > .entry > .entry__content > p > strong', entireWebsiteHtml).eq(i).text();\n\n      let articleUrl = cheerio('.entries > .entry > .media-photo > a', entireWebsiteHtml)[i].attribs.href;\n\n      let imageUrl = cheerio('.entries > .entry > .media-photo > a > img', entireWebsiteHtml)[i].attribs.src;\n\n      let offertObject = {\n        offertTitle: title,\n        offertDescription: description,\n        offertUrl: articleUrl,\n        offertImageUrl: imageUrl\n      };\n\n      flyResults.push(offertObject);\n  });\n\n  flyResults.map(singleFlyResult => {\n\n      var checkIfRecordExists = \"SELECT * FROM fly4free WHERE page_url = '\" + singleFlyResult.offertUrl + \"' LIMIT 1\";\n\n      con.query(checkIfRecordExists, function (err, result) {\n\n        if (err) throw err;\n\n        console.log(result.length);\n\n        if (result.length == 0){\n\n          var sql = \"INSERT INTO fly4free (title, description, page_url, img_url) VALUES ('\" + singleFlyResult.offertTitle + \"', '\" + singleFlyResult.offertDescription + \"', '\" + singleFlyResult.offertUrl + \"', '\" + singleFlyResult.offertImageUrl + \"')\";\n\n          con.query(sql, function (err, result) {\n            if (err) throw err;\n            console.log(\"record added\");\n          });\n        }\n\n        else{\n          console.log(\"record exists\");\n        }\n  });\n});\n})\n.catch(function(err){\n  console.log(err);\n});\n</pre>\n<p>First, we need to declare some additional packages.</p>\n<p>Request-promise – used for HTTP request</p>\n<p>cheerio – used for load website content</p>\n<p>mysql – used for operation on our db</p>\n<p>Then we have to check if db table called ‘fly4free’ exists. If that’s false then we need to create table with fields: id(autoincrement), title, description, page_url and img_url to store our results.</p>\n<p>Then we need to inspect fly4free website and find in an html structure container of content we are interested.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 970px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/c8b6791fdc73345a97ed9037e6e6cdb7/0b367/article5.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 43.769968051118205%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB/ElEQVQozx2QS3PSUACF8yed8Qe4csaFjm4cd+6Km3YsBYtAx03pjC4UETpAmkJRXtoSCARKeeUB5HXzvLlJbmL07M6Z+ebMOQSErmEYjuMgCG1dtw3dtqw48fxw2L+sfktvttpKkP0AR1Hkeb4uy0ABto18HxP73Z6mh7PJuDdf5kaLC2ZhmoZl6r4fDHpUtZjf8LIoKjjAOMRuLB1YwMReEIUhUfuzfp5qvMnfvP0yOmnyhS5fHuwrgz011W+n4y7dZUSBlbaW70UhloAlqM5cUHgN7YyAKN7Jj9P0s/Pp08yvV7nmYXn1rrRIlJZpkusrckfdtySuvn0QbD2KQl615hKcbNSp6Kw1n/jcXTxKki/y9SeJs5en31N17gO5PqmtP7VE0/Itw4MOxq6H44lh6HkoQNBUVWi5IQ6I1nR/UGSOyuPE18H7y1mG4lMkl6yustcb2UQScDQTmQ5CnhcfFgQYQqhqGnL9MIqI25Wa/DHMVUY5ks1e32fIyWmdTdfGeYpts9veTKHoLXkn7jQYw34QuNAFOojh2BLdB+WoyGRKTKYaw/OPV/dZap4hZ4W20OhTv+nGbLljFyJ00f/mADlQBwBBD2NMFDvs6/POWVvJ3Yi5pnhc5Y5r3GFlddFRCj+7B1cMJ6o7SXHRP9gwbU0FuqYZAMiy/BcLbc2r4O1TPwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"article5\" title=\"article5\" src=\"/static/c8b6791fdc73345a97ed9037e6e6cdb7/9435c/article5.png\" srcset=\"/static/c8b6791fdc73345a97ed9037e6e6cdb7/02020/article5.png 243w,\n/static/c8b6791fdc73345a97ed9037e6e6cdb7/d40d9/article5.png 485w,\n/static/c8b6791fdc73345a97ed9037e6e6cdb7/9435c/article5.png 970w,\n/static/c8b6791fdc73345a97ed9037e6e6cdb7/0125f/article5.png 1455w,\n/static/c8b6791fdc73345a97ed9037e6e6cdb7/0b367/article5.png 1565w\" sizes=\"(max-width: 970px) 100vw, 970px\" loading=\"lazy\">\n  </a>\n    </span>\n<p>We found our data in ‘.entries-sub > .entry’. There is single offer on the website. For every offer, we need to scrap title, offer url, image source, and description.</p>\n<p>With cheerio we get the content of that html and store that in result const. Then we map every result(every offer container) and store interesting data. We add every offer object to flyResults array.</p>\n<p>Then when we have array of all results that’s time to store that results in our db.</p>\n<p>For every result in the array first we check if offer doesn’t exists in our database. If that’s true, then we insert that record in our database using SQL query.</p>\n<h3>Route for return record from database</h3>\n<p><span class=\"blog-post__file--name\"><i>routes/offertsList.js</i></span></p>\n<pre>\nconst express = require('express');\n\nconst router = express.Router();\n\nconst mysql = require('mysql');\n\nconst con = mysql.createConnection({\n  host: \"localhost\",\n  user: \"root\",\n  password: \"\",\n  database: \"flyscrapper\"\n});\n\nrouter.get('/offers', function (req, res) {\n  con.query(\"SELECT \\* FROM fly4free\", function (err, result, fields) {\n      if (err) throw err;\n      res.send(result);\n  });\n})\n\nmodule.exports = router;\n</pre>\n<p>It’s similar for scrapper code. We connect with our db and for GET request in address /offers we return all records from fly4free table.</p>\n<h3>Main Node.js to link everything</h3>\n<pre>\nconst express = require('express');\n\nconst os = require('os');\n\nconst router = express.Router();\n\nconst app = express();\n\nconst fly4free = require('./fly4freeScrapper');\n\napp.all('/\\*', function(req, res, next) {\n  res.header(\"Access-Control-Allow-Origin\", \"\\*\");\n  res.header(\"Access-Control-Allow-Headers\", \"X-Requested-With\");\n  next();\n});\n\napp.use(express.static('dist'));\n\napp.listen(8080, () => console.log('Listening on port 8080!'));\n\nconst offertsList = require('./routes/offertsList');\n\napp.use('/', offertsList);\n\n</pre>\n<p>We require to execute fly4freeScrapper.js file with our scrapper. We need also include code to allow CORS. Without that we’ll have troubles with load data from our GET request /offers in React component. At the end of that file we add our route.</p>\n<h3>Frontend part</h3>\n<p>We got react configured in our boilerplate. We need following files/directories structure for our frontend.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 215px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b77b5f243f3d1c192bd283b7d25642e4/3abe3/article6.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 144.1860465116279%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAIAAAAl5NuSAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC1ElEQVQ4y41Ua3OaQBTllySKCiywICAg8lbwAYIKxqadmg9N//9v6NFNHZsmUec4c4fds/ee++L6/QGlukxkqsqiKArCCYOBcA+4Xq8/9iaeY7ZlRCSx0+Xx5V4y/t0uL4qSLCu6PtQ0nVIN4dxLxlXbdlx3fDgcvn//kWU5nmPfGb4is3tMKmJmBCZeksgXKXgj83xvNLKDIFytisPh2/Pz8263a9s97CRJcfrhE9zFgk/coJQSIkM59CMLhCiKot7wzMiGYUB8URRN0zw9HYDd6dcMhwZ7+lPyRbyqUgBuLWsE/wiEHaEiSMGnZDyPOnneBAmH26Io1+uqaVqIr+vNfv8E+5r/3jNigwcoNwwTQAiIWdcNPAr7nX7uX6bQ6QyCQK4qNQiS4/En/Nd1XVXVfn+AZ6QDQV1a8H/NgiyLqioqCoVgeEPmGWCjnAjk0jYfeA5DebOhaZq/vr6eE95A+WazZT4v7cTI4jWYZ0XBmYg8QyQyxNQiBQ8Pj51O59y8p8vcVQMPHh/7cUyqimZZ2bYNsp3nOXSi1mfl9Xa7hZGmUxYCJ8v0AknC8xBJ0CxRlARBHEUpAGOxKHw/ms+XQBgmhKi4z3lezOC64Wy2XC7rl5ffx+Ovqmps2wdGoxNM04NtWRPLOhmMwpmmy2AYjuNMcJAk8yxbeF6oadZwaOPIsk44G+Mz3ihXmgUBmqOILJdKHM/W6zUmzPeD68F+h6tS9Xo9vk8Ir2mYkFEQBGkKteGtZSCIfZ7XpyvN8fJZnqT5ZOJjsaAkmOQba+gEZF5zJWWYZ9l0OhuPPd/30eRfb1KONVa3KyznUuCrUAsyPKNDbq5B7u8wCp5HLEtJ06wsS6yee8n48byQJvLE08YuSpU4jgvctXrP89CLIsm21el0vipKNOZisbp3b5umRSTFd8zxSHNMynd59P+9ZMOwzCFty7jM/HUeYFmd5+YG+Q8N9jpxBXewOAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"article6\" title=\"article6\" src=\"/static/b77b5f243f3d1c192bd283b7d25642e4/3abe3/article6.png\" srcset=\"/static/b77b5f243f3d1c192bd283b7d25642e4/3abe3/article6.png 215w\" sizes=\"(max-width: 215px) 100vw, 215px\" loading=\"lazy\">\n  </a>\n    </span>\n<h3>Bootstrap setup</h3>\n<p>We add bootstrap to make our app not so ugly.</p>\n<p>Add bootstrap package for our package.json</p>\n<pre>\nnpm install --save react-bootstrap\n</pre>\n<p>We also need to include bootstrap in our public/index.html before our closing body tag.</p>\n<pre>\nlink rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\" crossorigin=\"anonymous\">\n\nlink rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css\" integrity=\"sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp\" crossorigin=\"anonymous\">\n</pre>\n<p><span class=\"blog-post__file--name\"><i>client/App.js</i></span></p>\n<pre>\nimport React, { Component } from 'react';\n\nimport './app.css';\n\nimport Main from './components/Main/Main';\n\nexport default class App extends Component {\n  render() {\n    return (\n        <div>\n          <Main />\n        </div>\n    );\n  }\n}\n</pre>\n<p><span class=\"blog-post__file--name\"><i>client/components/Main/Main.js</i></span></p>\n<pre>\nimport React, { Component } from 'react';\n\nimport MainLandingPage from './../LandingList/MainLandingPage';\n\nclass Main extends Component{\n  render(){\n    return(\n        <MainLandingPage />\n    )\n  }\n}\nexport default Main;\n</pre>\n<p><span class=\"blog-post__file--name\"><i>client/components/LandingList/MainLandingPage.js</i></span></p>\n<pre>\nimport React, { Component } from 'react';\n\nimport OffertsList from './SubComponents/OffertsList';\n\nclass MainLandingPage extends Component{\n  render(){\n    return(\n        <div className=\"container\">\n          <OffertsList />\n        </div>\n    )\n  }\n}\nexport default MainLandingPage;\n</pre>\n<p><span class=\"blog-post__file--name\"><i>client/components/LandingList/SubComponents.js</i></span></p>\n<pre>\nimport React, { Component } from 'react';\n\nimport OffertListItem from './OffertListItem';\n\nimport axios from 'axios';\n\nclass OffertsList extends Component{\n  constructor(props){\n    super(props);\n    this.state ={\n        offersList: []\n    }\n  }\n\n  async componentDidMount(){\n    const allOffers = await axios.get(\n        `http://localhost:8080/offers`\n    );\n    await this.setState({offersList: allOffers.data});\n  }\n\n  render(){\n    return(\n        <div className=\"row\">\n          {this.state.offersList.map((offer, i) => {\n            return(<OffertListItem offer={offer} key={i}/>);\n          })}\n        </div>\n    )\n  }\n}\nexport default OffertsList;\n</pre>\n<p>In that component we load GET request /offers content using axios and store that in our state variable – offersList. Then we map through all offersList items and send data to OffertListItem with is component displayed single offer in our app.</p>\n<p>To install axios run in terminal:</p>\n<pre>\nnpm install axios --save\n</pre>\n<p><span class=\"blog-post__file--name\"><i>client/components/LandingList/OffertListItem.js</i></span></p>\n<pre>\nimport React, { Component } from 'react';\n\nclass OffertListItem extends Component{\n  constructor(props){\n    super(props);\n  }\n\n  render(){\n    return(\n        div className=\"row\">\n          a href={this.props.offer.page_url}>\n            div className=\"col-sm-4\">\n              img src={this.props.offer.img_url} />\n            /div>\n            div className=\"col-sm-8\">\n              h1>{this.props.offer.title}/h1>\n              p>{this.props.offer.description}/p>\n            /div>\n          /a>\n        /div>\n    )\n  }\n\n}\nexport default OffertListItem;\n</pre>\n<p>In that component we display data for every offer which we got as props for the previous OffertList component.</p>\n<p>And that’s everything. Now every time you run npm run dev, our scrapper check and save data to our database and results are displayed our frontend.</p>\n</div>","frontmatter":{"path":"/build-web-scrapping-app-with-node-js-and-react-js","title":"Build web scrapping app with Node.js and React.js","author":"Szymon Radosz","date":"2018-11-17"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}